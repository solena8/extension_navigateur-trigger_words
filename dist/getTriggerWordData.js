(()=>{"use strict";var e={498:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.blurrImages=function(){!function(){const e=function(){const e=document.querySelector("style#dynamic-stylesheet");if(e)return e.sheet;const t=document.createElement("style");return t.id="dynamic-stylesheet",document.head.appendChild(t),t.sheet}();if(e)try{e.insertRule(".blurred { filter: blur(50px); }",e.cssRules.length)}catch(e){console.error("Error inserting blur rule:",e)}}(),document.querySelectorAll("img").forEach((e=>{e.classList.add("blurred")}))}},481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.blockWords=n;const o=r(498);function n(){let e=!1,t=0;document.getElementById("wordList")||chrome.storage.sync.get(["blockedWords","blurButtonToggled"],(r=>{const n=r.blockedWords||[],c=r.blurButtonToggled||!1;!function r(o){if(o.nodeType===Node.TEXT_NODE){let r=o.textContent||"";n.forEach((o=>{const n={a:"[aàáâäãåAÀÁÂÄÃÅ]",e:"[eéèêëEÉÈÊË]",i:"[iíîïIÍÎÏ]",o:"[oòóôöõOÒÓÔÖÕ]",u:"[uùúûüUÙÚÛÜ]"},c=new RegExp(`\\b${(e=>e.replace(/[aeiouáàâäãåéèêëíîïóòôöõúûü]/gi,(e=>{const t=e.toLowerCase();return n[t]||e})))(o)}\\w{0,2}\\b`,"gi"),s=r.match(c);s&&(e=!0,t+=s.length,r=r.replace(c,(e=>"*".repeat(e.length))))})),o.textContent=r}else o.nodeType===Node.ELEMENT_NODE&&(["SCRIPT","STYLE","NOSCRIPT"].includes(o.nodeName)||o.childNodes.forEach(r))}(document.body),e&&(alert(`Cette page contient ${t} mot(s) bloqué(s) !`),c&&(0,o.blurrImages)())}))}window.addEventListener("DOMContentLoaded",(()=>{n()})),new MutationObserver((()=>{n()})).observe(document.body,{childList:!0,subtree:!0})},522:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addWordList=function(e,t="blockedWords"){const r=[...new Set(e)];chrome.storage.sync.set({[t]:r},(()=>{chrome.runtime.lastError?console.error("Error saving words:",chrome.runtime.lastError):console.log(`Words saved to storage under key "${t}":`,r),chrome.tabs.query({active:!0,currentWindow:!0},(e=>{var t;void 0!==(null===(t=e[0])||void 0===t?void 0:t.id)?chrome.scripting.executeScript({target:{tabId:e[0].id},func:o.blockWords}):console.error("No active tab found!")}))}))},t.removeWordList=function(e){chrome.storage.sync.get("blockedWords",(t=>{const r=(t.blockedWords||[]).filter((t=>t!==e));chrome.storage.sync.set({blockedWords:r},(()=>{chrome.runtime.lastError?console.error("Error saving blocked words:",chrome.runtime.lastError):console.log("Blocked words updated:",r),chrome.tabs.query({active:!0,currentWindow:!0},(e=>{void 0!==e[0].id?chrome.scripting.executeScript({target:{tabId:e[0].id},func:o.blockWords}):console.error("No active tab found!")}))}))}))},t.getSubcategories=function(e,t){let r=[];return("string"==typeof t?[t]:t).forEach((t=>{Object.keys(e).forEach((o=>{e[o][t]?r=r.concat(e[o][t]):o===t&&Object.values(e[o]).forEach((e=>{r=r.concat(e)}))}))})),console.log(r),r};const o=r(481)}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,r),c.exports}(()=>{const e=r(522),t=r(522);function o(){return fetch(chrome.runtime.getURL("./assets/trigger_db.json")).then((e=>e.json())).then((e=>e.categories)).catch((e=>{throw console.error("Erreur lors du chargement du JSON:",e),e}))}document.getElementById("trigger_list").addEventListener("click",(r=>{if("BUTTON"!==r.target.nodeName)return;let n;if(n=r.target.id,"validateOptionButton"===n){var c=document.querySelectorAll("input[type=checkbox]:checked");let r=Array.from(c).map((e=>e.id));return r.pop(),void o().then((o=>{let n=(0,t.getSubcategories)(o,r);(0,e.addWordList)(n),console.log(n)})).catch((e=>{console.error("Erreur lors du chargement du JSON:",e)}))}o().then((e=>{!function(e,t){if(e.hasOwnProperty(t)){const r=e[t];if(document.getElementById(`sub-${t}`).hasChildNodes())document.getElementById(`sub-${t}`).innerHTML="";else{const e=document.createElement("p");for(const[t,[o]]of Object.entries(Object.entries(r)))e.innerHTML+=`\n                        <div>\n                            <input type="checkbox" id="${o}" name="categorie"/>\n                            <label for="categorie">${o}</label>\n                        </div>\n                        </br>`;document.getElementById(`sub-${t}`).appendChild(e)}}else console.error(`Catégorie "${t}" non trouvée.`)}(e,n)})).catch((e=>{console.error("Erreur lors du chargement du JSON:",e)}))}))})()})();